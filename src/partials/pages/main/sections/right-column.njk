<section id="right-column" class="column col-right layout-aside">
  <!-- ===================== Agent Status ===================== -->
  <section>
    <header class="panel-header panel-header-actions-only">
      <div class="panel-header-actions">
        <div class="agent-kpi-bar" aria-label="상담 지표">
          <div class="agent-kpi-item">
            <span class="agent-kpi-label">금일상담</span>
            <span class="agent-kpi-value">24건</span>
          </div>
          <div class="agent-kpi-item">
            <span class="agent-kpi-label">통화시간</span>
            <span class="agent-kpi-value">03:42:15</span>
          </div>
          <div class="agent-kpi-item">
            <span class="agent-kpi-label">고객대기</span>
            <span class="agent-kpi-value">5명</span>
          </div>
          <div class="agent-kpi-item">
            <span class="agent-kpi-label">대기시간</span>
            <span class="agent-kpi-value">01:28</span>
          </div>
        </div>
        <div class="agent-status-bar">
          <div class="status-indicator status-ready" data-role="status-indicator"></div>
          <select class="status-select" data-role="agent-status-select">
            <option value="ready">업무</option>
            <option value="away">이석</option>
            <option value="busy">대기</option>
            <option value="break">휴식</option>
            <option value="meeting">회의</option>
          </select>
        </div>
        <button type="button" class="softphone-outbound-btn" data-action="main-open-group-switch-modal" aria-label="그룹전환">
          <i class="fa-solid fa-arrows-rotate"></i>
          그룹전환
        </button>
        <button type="button" class="softphone-outbound-btn" data-action="main-open-outbound-modal" aria-label="아웃바운드 발신">
          <i class="fa-solid fa-phone"></i>
          아웃바운드
        </button>
        <div class="agent-login-chip" aria-label="로그인 상담원 정보">
          <span class="agent-login-chip__avatar">
            <i class="fa-solid fa-user"></i>
          </span>
          <span class="agent-login-chip__meta">
            <span class="agent-login-chip__role">상담원</span>
            <span class="agent-login-chip__name" data-role="agent-display" data-agent-display>김민수(204075)</span>
          </span>
          <button type="button" class="agent-logout-btn" data-action="main-logout" aria-label="로그아웃">
            <i class="fa-solid fa-right-from-bracket"></i>
            로그아웃
          </button>
        </div>
      </div>
    </header>
  </section>

  <!-- ===================== Softphone Scripts ===================== -->
  <section class="softphone-script-panel">
    <header class="softphone-script-header">
      <span class="softphone-script-title">
        <i class="fa-solid fa-volume-high"></i> 안내 멘트 송출
      </span>
      <button type="button" class="softphone-call-toggle" data-action="softphone-toggle" data-call-toggle>
        통화중 OFF
      </button>
    </header>
    <div class="softphone-script-grid">
      <button type="button" class="softphone-script-btn" data-action="softphone-script" data-target="녹취 동의 안내" data-softphone-script="녹취 동의 안내">
        <i class="fa-solid fa-microphone-lines"></i>
        녹취동의
      </button>
      <button type="button" class="softphone-script-btn" data-action="softphone-script" data-target="개인정보 수집 동의" data-softphone-script="개인정보 수집 동의">
        <i class="fa-solid fa-user-shield"></i>
        개인정보
      </button>
      <button type="button" class="softphone-script-btn" data-action="softphone-script" data-target="투자 유의사항" data-softphone-script="투자 유의사항">
        <i class="fa-solid fa-triangle-exclamation"></i>
        투자유의
      </button>
      <button type="button" class="softphone-script-btn" data-action="softphone-script" data-target="통화 종료 안내" data-softphone-script="통화 종료 안내">
        <i class="fa-solid fa-phone-slash"></i>
        종료안내
      </button>
    </div>
    <div class="softphone-script-status" data-role="softphone-output" data-softphone-output>
      통화중 상태에서 버튼을 누르면 멘트가 송출됩니다.
    </div>
  </section>

  <!-- ===================== History Editor ===================== -->
  <section class="info-card history-editor-panel history-editor-panel--compact">
    <div class="history-editor-header main-section-header">
      <h4 class="history-editor-title">
        <i class="fa-solid fa-pen-to-square history-editor-icon-brand"></i>
        상담이력 입력
      </h4>
      <div class="history-editor-header-actions">
        <div class="history-editor-actions history-editor-actions--inline">
          <button class="btn--history-reset">
            <i class="fa-solid fa-rotate-left history-action-icon-gap"></i>초기화</button
          ><button class="btn--history-reset history-editor-save-btn">
            <i class="fa-solid fa-save history-action-icon-gap"></i>저장
          </button>
        </div>
        <span class="history-editor-timestamp history-editor-timestamp--tail" data-role="current-datetime" data-current-datetime></span>
      </div>
    </div>
    <div class="history-editor-form">
      <div class="history-editor-card">
        <div class="history-editor-group history-editor-group--category">
          <div class="history-editor-card-header">
            <label class="history-editor-section-title">상담유형</label>
            <span class="history-editor-section-hint"
              >대분류 &gt; 중분류 &gt; 소분류</span
            >
          </div>
          <div class="history-category-grid">
            <div>
              <label class="history-field-label">대분류</label>
              <select class="field consultation-category-select">
                <option selected>투자상담</option>
                <option>업무처리</option>
                <option>민원/클레임</option>
              </select>
            </div>
            <div>
              <label class="history-field-label">중분류</label>
              <select class="field consultation-category-select">
                <option selected>해외투자</option>
                <option>국내주식</option>
                <option>펀드/ETF</option>
                <option>ISA/연금</option>
              </select>
            </div>
            <div>
              <label class="history-field-label">소분류</label>
              <select class="field consultation-category-select">
                <option selected>해외주식 매수문의</option>
                <option>해외주식 수수료</option>
                <option>환전/외화입출금</option>
                <option>해외시장 운영시간</option>
              </select>
            </div>
          </div>
        </div>
        <div class="history-editor-group history-editor-group--note">
          <div class="history-note-header">
            <label class="history-note-title"
              ><i class="fa-regular fa-note-sticky history-note-icon"></i>상담내용</label
            >
            <span class="history-note-limit">최대 500자</span>
          </div>
          <textarea
            rows="3"
            placeholder="1) 고객 문의사항&#10;2) 안내한 내용&#10;3) 후속 조치(있다면)"
            class="consultation-note field consultation-note-input consultation-note-field"
          ></textarea>
          <div class="history-note-meta">
            <span>작성 팁: 문의 → 조치 → 결과 순으로 작성</span
            ><span>0 / 500자</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===================== My History ===================== -->
  <section class="info-card main-my-history-panel">
    <div class="main-my-history-header main-section-header">
      <span class="main-my-history-title">나의 상담이력 조회</span>
      <button class="history-export-btn">
        <i class="fa-solid fa-download"></i>내역 다운로드
      </button>
    </div>
    <div class="panel__body panel__body--history-filter main-my-history-filter">
      <div class="main-my-history-filter-grid">
        <div class="main-history-filter-row">
          <label class="main-history-filter-label">
            조회기간
          </label>
          <div class="main-inline-date-range full-width">
            <input type="date" value="2026-02-01" class="field field--history-date" />
            <span class="main-my-history-date-sep">~</span>
            <input type="date" value="2026-02-16" class="field field--history-date" />
          </div>
        </div>
        <div class="main-history-filter-row">
          <label class="main-history-filter-label">
            고객명
          </label>
          <input type="text" placeholder="고객명" class="field field--history-input" />
        </div>
        <div class="main-history-filter-row">
          <label class="main-history-filter-label">
            계좌번호
          </label>
          <input type="text" placeholder="계좌번호" class="field field--history-input" />
        </div>
        <div class="main-history-filter-row">
          <label class="main-history-filter-label">
            전화번호
          </label>
          <input type="text" placeholder="전화번호" class="field field--history-input" />
        </div>
        <div class="main-history-filter-row">
          <label class="main-history-filter-label">
            상담유형
          </label>
          <select class="field field--history-category">
            <option>전체</option>
            <option>일반</option>
            <option>업무처리</option>
            <option>민원</option>
            <option>해외투자</option>
          </select>
        </div>
        <div class="main-history-filter-row">
          <label class="main-history-filter-label">
            상담내용
          </label>
          <input type="text" placeholder="상담내용" class="field field--history-input" />
        </div>
      </div>
      <div class="main-my-history-actions">
        <button class="btn--history-reset main-my-history-btn">
          <i class="fa-solid fa-rotate-right main-history-icon-gap"></i>초기화
        </button>
        <button class="btn--history-search main-my-history-btn">
          <i class="fa-solid fa-magnifying-glass main-history-icon-gap"></i>조회
        </button>
      </div>
    </div>
    <div class="main-my-history-table-wrap">
      <table class="tbl table--history">
        <thead class="main-history-thead">
          <tr>
            <th class="table__head table__head--narrow">NO</th>
            <th class="table__head table__head--time">
              시간 <i class="fa-solid fa-sort main-history-sort-icon"></i>
            </th>
            <th class="table__head">상담원</th>
            <th class="table__head table__head--io">I/O</th>
            <th class="table__head">고객명</th>
            <th class="table__head">전화번호</th>
            <th class="table__head table__head--account">계좌번호</th>
            <th class="column-width-sm table__head">상담유형</th>
            <th class="table__head">채널</th>
            <th class="table__head table__head--summary">상담내용</th>
          </tr>
        </thead>
        <tbody class="main-history-body" data-role="my-history-body" data-history-detail-source>
          {% for row in main_data.my_history_rows %}
            <tr class="tbl__row{% if row.is_active %} is-active{% endif %}">
              <td class="tbl__cell{% if row.is_active %} tbl__cell--accent{% endif %}">{{ row.id }}</td>
              <td class="tbl__cell">
                {{ row.timestamp }}
              </td>
              <td class="tbl__cell">{{ row.agent }}</td>
              <td class="tbl__cell">
                <span class="{% if row.direction == 'I' %}badge--io-in{% else %}badge--io-out{% endif %}">{{ row.direction }}</span>
              </td>
              <td class="tbl__cell tbl__cell--strong">
                {{ row.customer }}
              </td>
              <td class="tbl__cell">{{ row.phone or '-' }}</td>
              <td class="tbl__cell">{{ row.account }}</td>
              <td class="tbl__cell">{{ row.type }}</td>
              <td class="tbl__cell">{{ row.channel }}</td>
              <td class="tbl__cell tbl__cell--truncate">
                {{ row.content }}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="pagination pagination--history main-my-history-pagination" data-role="my-history-pagination">
      <button class="pagination__btn" data-action="my-history-nav-first" data-my-history-nav="first">
        <i class="fa-solid fa-angles-left"></i></button
      ><button class="pagination__btn" data-action="my-history-nav-prev" data-my-history-nav="prev">
        <i class="fa-solid fa-angle-left"></i></button
      ><button class="pagination__btn is-active" data-action="my-history-page-btn" data-target="1" data-my-history-page-btn="1">1</button
      ><button class="pagination__btn" data-action="my-history-page-btn" data-target="2" data-my-history-page-btn="2">2</button
      ><button class="pagination__btn" data-action="my-history-page-btn" data-target="3" data-my-history-page-btn="3">3</button
      ><button class="pagination__btn" data-action="my-history-nav-next" data-my-history-nav="next">
        <i class="fa-solid fa-angle-right"></i></button
      ><button class="pagination__btn" data-action="my-history-nav-last" data-my-history-nav="last">
        <i class="fa-solid fa-angles-right"></i>
      </button>
    </div>
  </section>
</section>
