<section id="chat-column" class="column col-chat layout-shell">
  <!-- ===================== Customer Info ===================== -->
  <section>
    {% include "partials/pages/main/customer-info.njk" %}
  </section>

  <!-- ===================== Verification ===================== -->
  <section>
    <form class="account-info-panel">
      <header class="account-panel-title-row">
        <span class="account-panel-title">본인확인 정보</span>
        <span class="account-panel-helper">필수 항목을 입력해 주세요</span>
      </header>
      <div class="account-info-grid">
        <div class="account-field-row account-field-row-full">
          <label
            for="account-number"
            class="account-field-label"
          >
            계좌번호
          </label>
          <input
            id="account-number" data-role="account-number"
            name="accountNumber"
            type="text"
            placeholder="567-890-1234"
            inputmode="numeric"
            autocomplete="off"
            maxlength="12"
            class="account-input"
            aria-label="계좌번호 입력"
          />
        </div>
        <div class="account-field-row">
          <label
            for="account-password"
            class="account-field-label"
          >
            계좌비번
          </label>
          <input
            id="account-password"
            name="accountPassword"
            type="password"
            placeholder="••••"
            autocomplete="new-password"
            maxlength="4"
            class="account-input"
            aria-label="계좌비밀번호 입력"
          />
        </div>
        <div class="account-field-row">
          <label
            for="account-owner"
            class="account-field-label"
          >
            계좌명
          </label>
          <input
            id="account-owner"
            name="accountOwner"
            type="text"
            placeholder="박지민"
            autocomplete="name"
            class="account-input"
            aria-label="계좌명 입력"
          />
        </div>
        <div class="account-field-row account-field-row-full">
          <label
            for="resident-id"
            class="account-field-label"
          >
            주민번호
          </label>
          <input
            id="resident-id" data-role="resident-id"
            name="residentId"
            type="text"
            placeholder="920315-2******"
            inputmode="numeric"
            maxlength="14"
            class="account-input"
            aria-label="주민번호 입력"
          />
        </div>
      </div>
      <div class="verify-transfer-actions" aria-label="고객정보 전송 버튼">
        <button type="button" class="verify-transfer-btn">
          <i class="fa-solid fa-arrow-up-right-from-square"></i>
          <span>HTS로 고객정보전송</span>
        </button>
        <button
          type="button"
          class="verify-transfer-btn verify-transfer-btn-goldnet"
        >
          <i class="fa-solid fa-paper-plane"></i>
          <span>골드넷+로 고객정보전송</span>
        </button>
      </div>
    </form>
  </section>

  <!-- ===================== Chat ===================== -->
  <section>
    <header class="panel-header main-live-header">
      <span class="weight-semibold">실시간 대화</span>
      <div class="main-live-header-actions">
        <div class="main-live-search-wrap">
          <input
            type="text"
            placeholder="검색어를 입력하세요"
            class="field placeholder-blue-200 chat-search-input"
          />
          <i
            class="fa-solid fa-magnifying-glass main-live-search-icon"
          ></i>
        </div>
        <button class="main-live-pause-btn">
          <i class="fa-solid fa-pause"></i>
        </button>
      </div>
    </header>
    <div class="chat-message-list">
      <div class="main-live-msg main-live-msg--agent">
        <div class="main-live-msg-meta">
          <span class="main-live-time-text">14:23</span>
          <span class="main-live-agent-text">상담사 K</span>
        </div>
        <div class="chat-bubble agent main-live-bubble-elevated">
          안녕하세요, 신한투자증권입니다. 무엇을 도와드릴까요?
        </div>
      </div>
      <div class="main-live-msg main-live-msg--customer">
        <div class="main-live-msg-meta">
          <i
            class="fa-regular fa-user main-live-user-icon"
          ></i>
          <span class="main-live-customer-text">고객01</span>
        </div>
        <div class="chat-bubble customer main-live-bubble-elevated">
          미국 ETF 투자를 시작하고 싶은데 어떻게 하면 될까요?
        </div>
        <div class="main-live-tag-row">
          <span class="tag-pill tag-pill--brand">해외투자</span>
          <span class="tag-pill tag-pill--brand">ETF</span>
          <span class="tag-pill tag-pill--teal">신규투자</span>
        </div>
        <span class="main-live-time-text main-live-msg-time">14:24</span>
      </div>
      <div class="main-live-msg main-live-msg--agent">
        <div class="main-live-msg-meta">
          <span class="main-live-time-text">14:24</span>
          <span class="main-live-agent-text">상담사 K</span>
        </div>
        <div class="chat-bubble agent main-live-bubble-elevated">
          미국 ETF 투자 방법을 안내해 드리겠습니다. 먼저 해외주식 계좌 개설이
          필요합니다.
        </div>
      </div>
      <div class="main-live-msg main-live-msg--customer">
        <div class="main-live-msg-meta">
          <i
            class="fa-regular fa-user main-live-user-icon"
          ></i>
          <span class="main-live-customer-text">고객01</span>
        </div>
        <div class="chat-bubble customer main-live-bubble-elevated">
          계좌는 이미 있어요. 수수료 혜택이 있나요?
        </div>
        <div class="main-live-tag-row">
          <span class="tag-pill tag-pill--brand">수수료문의</span>
          <span class="tag-pill tag-pill--teal">이벤트</span>
        </div>
        <span class="main-live-time-text main-live-msg-time">14:25</span>
      </div>
      <div class="main-live-read-wrap">
        <div class="chat-read-marker">여기까지 읽었습니다.</div>
      </div>
      <div class="main-live-scroll-wrap">
        <button class="chat-scroll-bottom-btn">
          <i class="fa-solid fa-chevron-down"></i>
        </button>
      </div>
    </div>
  </section>

  <!-- ===================== History Table ===================== -->
  <section>
    <header class="panel__header panel__header--history">
      <span class="weight-semibold">상담이력 조회</span>
      <div class="main-history-actions">
        <button class="btn--history-reset">
          <i class="fa-solid fa-rotate-right main-history-icon-gap"></i>
          초기화
        </button>
        <button class="btn--history-search">
          <i class="fa-solid fa-magnifying-glass main-history-icon-gap"></i>
          조회
        </button>
      </div>
    </header>
    <div class="panel__body panel__body--history-filter">
      <div class="main-history-filter-grid">
        <div class="main-history-filter-row">
          <label class="main-history-filter-label">
            조회기간
          </label>
          <div class="main-history-filter-controls">
            <select class="field field--history-select">
              <option>1개월</option>
              <option>3개월</option>
              <option selected="">6개월</option>
            </select>
            <input
              type="date"
              value="2023-11-23"
              class="field field--history-date"
            />
            <span class="main-history-date-sep">~</span>
            <input
              type="date"
              value="2024-05-21"
              class="field field--history-date"
            />
          </div>
        </div>
        <div class="main-history-filter-row">
          <label
            class="main-history-filter-label form-label-compact"
          >
            고객명
          </label>
          <input
            type="text"
            value="박지민"
            class="field field--history-input"
          />
        </div>
        <div class="main-history-filter-row">
          <label class="main-history-filter-label">
            상담유형
          </label>
          <div class="main-history-filter-controls">
            <select class="field field--history-category">
              <option selected="">대분류</option>
              <option>금융상품</option>
              <option>계좌/인증</option>
              <option>민원/클레임</option>
            </select>
            <select class="field field--history-category">
              <option selected="">중분류</option>
              <option>ETF</option>
              <option>해외주식</option>
              <option>수수료</option>
            </select>
            <select class="field field--history-category">
              <option selected="">소분류</option>
              <option>매수방법</option>
              <option>이벤트</option>
              <option>민원접수</option>
            </select>
          </div>
        </div>
        <div class="main-history-filter-row">
          <label class="main-history-filter-label">
            상담원
          </label>
          <input
            type="text"
            placeholder="상담원명"
            class="field field--history-input"
          />
        </div>
      </div>
    </div>
    <div class="panel--history-table">
      <div class="panel__header panel__header--table">
        <span class="main-history-list-title"
          >이력목록
          <span class="main-history-count">(총 29건)</span></span
        ><button class="history-export-btn">
          <i class="fa-regular fa-file-excel main-history-export-icon"></i> 엑셀다운
        </button>
      </div>
      <div class="main-history-table-wrap">
        <table class="tbl table--history">
          <thead class="main-history-thead">
            <tr>
              <th class="table__head table__head--narrow">NO</th>
              <th class="table__head table__head--time">
                시간 <i class="fa-solid fa-sort main-history-sort-icon"></i>
              </th>
              <th class="table__head">상담원</th>
              <th class="table__head table__head--io">I/O</th>
              <th class="table__head">고객명</th>
              <th class="table__head table__head--account">계좌번호</th>
              <th class="column-width-sm table__head">상담유형</th>
              <th class="table__head">채널</th>
              <th class="table__head table__head--summary">상담내용</th>
            </tr>
          </thead>
          <tbody class="main-history-body" data-role="history-body history-detail-source" data-history-body data-history-detail-source>
            {% for row in main_data.history_rows %}
              <tr class="tbl__row{% if row.is_active %} is-active{% endif %}">
                <td class="tbl__cell{% if row.is_active %} tbl__cell--accent{% endif %}">{{ row.id }}</td>
                <td class="tbl__cell">
                  {{ row.timestamp }}
                </td>
                <td class="tbl__cell">{{ row.agent }}</td>
                <td class="tbl__cell">
                  <span class="{% if row.direction == 'I' %}badge--io-in{% else %}badge--io-out{% endif %}">{{ row.direction }}</span>
                </td>
                <td class="tbl__cell tbl__cell--strong">
                  {{ row.customer }}
                </td>
                <td class="tbl__cell">{{ row.account }}</td>
                <td class="tbl__cell">{{ row.type }}</td>
                <td class="tbl__cell">{{ row.channel }}</td>
                <td class="tbl__cell tbl__cell--truncate">
                  {{ row.content }}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <div class="pagination pagination--history" data-role="history-pagination" data-history-pagination>
        <button class="pagination__btn" data-action="history-nav-first" data-history-nav="first">
          <i class="fa-solid fa-angles-left"></i></button
        ><button class="pagination__btn" data-action="history-nav-prev" data-history-nav="prev">
          <i class="fa-solid fa-angle-left"></i></button
        ><button class="pagination__btn is-active" data-action="history-page-btn" data-target="1" data-history-page-btn="1">1</button
        ><button class="pagination__btn" data-action="history-page-btn" data-target="2" data-history-page-btn="2">2</button
        ><button class="pagination__btn" data-action="history-page-btn" data-target="3" data-history-page-btn="3">3</button
        ><button class="pagination__btn" data-action="history-nav-next" data-history-nav="next">
          <i class="fa-solid fa-angle-right"></i></button
        ><button class="pagination__btn" data-action="history-nav-last" data-history-nav="last">
          <i class="fa-solid fa-angles-right"></i>
        </button>
      </div>
    </div>
  </section>
</section>
