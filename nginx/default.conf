server {
  listen 80;
  server_name _;

  root /usr/share/nginx/html;
  index index.html;

  # Canonical URL: /page.html -> /page
  location ~ ^/(.+)\.html$ {
    return 301 /$1;
  }

  location = / {
    try_files /index.html =404;
  }

  # Keep canonical non-trailing-slash routes (/main instead of /main/)
  location ~ ^/(.+)/$ {
    return 301 /$1;
  }

  location / {
    try_files $uri $uri.html $uri/ =404;
  }
}
